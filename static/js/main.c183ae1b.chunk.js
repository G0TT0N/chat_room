(window.webpackJsonpchat_room=window.webpackJsonpchat_room||[]).push([[0],{175:function(e,a,t){e.exports=t.p+"static/media/wave.2b8196a5.svg"},176:function(e,a,t){e.exports=t.p+"static/media/play.3a10db5c.svg"},177:function(e,a,t){e.exports=t.p+"static/media/pause.a61933e8.svg"},179:function(e,a,t){e.exports=t.p+"static/media/readed.c1f419d6.svg"},180:function(e,a,t){e.exports=t.p+"static/media/noreaded.3c841bf6.svg"},194:function(e,a,t){e.exports=t(414)},205:function(e,a,t){},246:function(e,a,t){},247:function(e,a,t){},248:function(e,a,t){},347:function(e,a,t){},348:function(e,a,t){},349:function(e,a,t){},395:function(e,a,t){},396:function(e,a,t){},413:function(e,a,t){},414:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),c=t.n(l),s=t(36),i=t(90),m=t(37),o=t(166),u={items:[]},d=Object(m.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"DIALOGS:SET_ITEMS":return{items:n};default:return e}}}),p=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,E=[o.a],g=Object(m.e)(d,p(m.a.apply(void 0,E))),v=t(167),f=t(168),h=t(191),_=t(169),b=t(192),N=t(38),y=t(89),w=t(415),O=t(416),j=t(20),S=t(94),k=(t(205),t(2)),x=t.n(k),I=function(e){return r.a.createElement(S.a,Object.assign({},e,{className:x()("button",e.className,{"button--large":"large"===e.size})}))},M=(t(246),function(e){var a=e.children,t=e.className;return r.a.createElement("div",{className:x()("block",t)},a)}),z=t(21),A=(t(247),t(175)),T=t.n(A),C=t(176),D=t.n(C),R=t(177),L=t.n(R),J=function(e,a,t){return a[e]?t[e]?"error":"success":""},F=t(88),Y=t.n(F),B=function(e){var a=e.audioSrc,t=Object(n.useState)(!1),l=Object(z.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(0),m=Object(z.a)(i,2),o=m[0],u=m[1],d=Object(n.useState)(0),p=Object(z.a)(d,2),E=p[0],g=p[1],v=Object(n.useRef)(null);return Object(n.useEffect)(function(){v.current.volume="0.01",v.current.addEventListener("playing",function(){s(!0)},!1),v.current.addEventListener("ended",function(){s(!1),u(0),g(0)},!1),v.current.addEventListener("pause",function(){s(!1)},!1),v.current.addEventListener("timeupdate",function(){var e=v.current&&v.current.duration||0;g(v.current.currentTime),u(v.current.currentTime/e*100)},!1)},[]),r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:v,src:a,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:o+"%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){c?v.current.pause():v.current.play()}},c?r.a.createElement("img",{src:L.a,alt:"pause"}):r.a.createElement("img",{src:D.a,alt:"play"}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:T.a,alt:"wave"})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var a=Math.floor(e/60),t=(e%60).toFixed();return"".concat(a<10?"0":"").concat(a,":").concat(t<10?"0":"").concat(t)}(E))))},P=function(e){var a=e.avatar,t=e.user,n=e.text,l=e.date,c=e.audio,s=e.isMe,i=e.isReaded,m=e.attachments,o=e.isTyping;return r.a.createElement("div",{className:x()("message",{"message--isme":s,"message--is-typing":o,"message--is-audio":c,"message--image":m&&1===m.length})},r.a.createElement("div",{className:"message__content"},r.a.createElement(ne,{isMe:s,isReaded:i}),r.a.createElement("div",{className:"message__avatar"},r.a.createElement("img",{src:a,alt:"Avatar ".concat(t.fullname)})),r.a.createElement("div",{className:"message__info"},(c||n||o)&&r.a.createElement("div",{className:"message__bubble"},n&&r.a.createElement("p",{className:"message__text"},n),o&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),c&&r.a.createElement(B,{audioSrc:c})),m&&r.a.createElement("div",{className:"message__attachments"},m.map(function(e){return r.a.createElement("div",{key:e.url,className:"message__attachments-item"},r.a.createElement("img",{src:e.url,alt:e.filename}))})),l&&r.a.createElement("span",{className:"message__date"},r.a.createElement(K,{date:l})))))};P.defaultProps={user:{}};var V=P,Z=t(55),G=function(e){return e.items?r.a.createElement("div",null,r.a.createElement(V,{avatar:"https://sun1-87.userapi.com/c852016/v852016997/1b674f/ybYJetYzEIk.jpg?ava=1",isMe:!1,date:new Date,audio:"https://notificationsounds.com/soundfiles/069059b7ef840f0c74a814ec9237b6ec/file-de_vuvuzela-power-down.wav"}),r.a.createElement(V,{avatar:"https://sun1-87.userapi.com/c852016/v852016997/1b674f/ybYJetYzEIk.jpg?ava=1",text:"\u0421\u0430\u043b\u0430\u043c, \u0411\u0440\u0443\u0442! \u0427\u0451, \u043a\u0430\u043a, \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0438\u043b \u0444\u043b\u043e\u0442 \u0433\u0430\u043b\u043b\u043e\u0432? \ud83d\udd90\ud83c\udffb",date:new Date,attachments:[{falename:"image.jpg",url:"http://source.unsplash.com/100x100/?random-1&nature,water"},{falename:"image.jpg",url:"http://source.unsplash.com/100x100/?random-2&nature,water"},{falename:"image.jpg",url:"http://source.unsplash.com/100x100/?random-3&nature,water"}],isMe:!1}),r.a.createElement(V,{avatar:"https://sun9-38.userapi.com/c846321/v846321172/10d6d6/eWA_JGAyu68.jpg?ava=1",text:"\u0421\u0430\u043b\u0430\u043c, \u0431\u0440\u0430\u0442 \u0426\u0435\u0437\u0430\u0440\u044c!",date:new Date,isMe:!0,isReaded:!1}),r.a.createElement(V,{avatar:"https://sun1-87.userapi.com/c852016/v852016997/1b674f/ybYJetYzEIk.jpg?ava=1",attachments:[{falename:"image.jpg",url:"http://source.unsplash.com/100x100/?random-1&nature,water"}],isMe:!1}),r.a.createElement(V,{avatar:"https://sun1-87.userapi.com/c852016/v852016997/1b674f/ybYJetYzEIk.jpg?ava=1",isTyping:!0,isMe:!1})):r.a.createElement(Z.a,{description:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0447\u0430\u0442"})},H=(t(248),t(126)),U=t(190),X=function(e){var a=e.user,t=e.unreaded,n=e.isMe,l=e.created_at,c=e.text;return r.a.createElement("div",{className:x()("dialogs__item",{"dialogs__item--online":a.isOnline})},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(se,{user:a})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,a.fullname),r.a.createElement("span",null,function(e){return Object(U.a)(new Date(e))?Object(H.a)(new Date(e),"HH:mm"):Object(H.a)(new Date(e),"dd.MM.yy")}(l))),r.a.createElement("div",{className:"dialogs__item-info-bottom"},r.a.createElement("p",null,c),n&&r.a.createElement(ne,{isMe:!0,isReaded:!0}),t>0&&r.a.createElement("div",{className:"dialogs__item-info-bottom-count"},t))))},W=t(188),$=t(178),q=t.n($),K=function(e){var a=e.date;return r.a.createElement(n.Fragment,null,Object(W.a)(a,{addSuffix:!0,locale:q.a}))},Q=t(179),ee=t.n(Q),ae=t(180),te=t.n(ae),ne=function(e){var a=e.isMe,t=e.isReaded;return a&&(t?r.a.createElement("img",{className:"message__icon-readed",src:ee.a,alt:"readedSvg"}):r.a.createElement("img",{className:"message__icon-readed",src:te.a,alt:"noreadedSvg"}))},re=t(181),le=t.n(re),ce=function(e){var a=e.items,t=e.userId,n=e.onSearch,l=e.inputValue;return r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"dialogs__search"},r.a.createElement(O.a.Search,{value:l,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u0440\u0435\u0434\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432",onChange:function(e){return n(e.target.value)}})),a.length>0?le()(a,["created_at"],["desc"]).map(function(e){return r.a.createElement(X,Object.assign({key:e._id,isMe:e.user._id===t},e))}):r.a.createElement(Z.a,{image:Z.a.PRESENTED_IMAGE_SIMPLE,description:"\u0414\u0438\u0430\u043b\u043e\u0433\u0430 \u043d\u0435\u0442"}))},se=(t(347),function(e){var a=e.user;if(a.avatar)return r.a.createElement("img",{className:"avatar",src:a.avatar,alt:"Avatar ".concat(a.fullname)});var t=function(e){var a=e.substr(0,3).split("").map(function(e){return(a=e.charCodeAt(0))>255?255:a<0?0:a;var a}),t=Object(z.a)(a,3),n=t[0],r=t[1],l=t[2];return{color:Y()({r:n,g:r,b:l}).lighten(10).saturate(30).toHexString(),colorLighten:Y()({r:n,g:r,b:l}).lighten(40).toHexString()}}(a._id),n=t.color,l=t.colorLighten,c=a.fullname[0].toUpperCase();return r.a.createElement("div",{style:{background:"linear-gradient(135deg, ".concat(n," 0%, ").concat(l," 96.52%)")},className:"avatar avatar--symbol"},c)}),ie=(t(348),function(e){var a=e.online;return r.a.createElement("span",{className:x()("status",{"status--online":a})},a?"\u043e\u043d\u043b\u0430\u0439\u043d":"\u043e\u0444\u043b\u0430\u0439\u043d")}),me=(t(349),function(){var e=Object(n.useState)(""),a=Object(z.a)(e,2),t=a[0],l=a[1];return r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",{className:"chat-input__smile-btn"},r.a.createElement(S.a,{type:"link",shape:"circle",icon:"smile"})),r.a.createElement(O.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f...",size:"large",onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement(S.a,{type:"link",shape:"circle",icon:"camera"}),t?r.a.createElement(S.a,{type:"link",shape:"circle",icon:"check-circle"}):r.a.createElement(S.a,{type:"link",shape:"circle",icon:"audio"})))}),oe=function(e){var a=e.values,t=e.touched,n=e.errors,l=e.handleChange,c=e.handleBlur,i=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(M,null,r.a.createElement(w.a,{onSubmit:i,className:"login-form"},r.a.createElement(w.a.Item,{validateStatus:J("email",t,n),help:t.email?n.email:"",hasFeedback:!0},r.a.createElement(O.a,{prefix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",size:"large",id:"email",value:a.email,onChange:l,onBlur:c})),r.a.createElement(w.a.Item,{validateStatus:J("password",t,n),help:t.password?n.password:"",hasFeedback:!0},r.a.createElement(O.a,{prefix:r.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",value:a.password,onChange:l,onBlur:c})),r.a.createElement(w.a.Item,null,r.a.createElement(I,{type:"primary",htmlType:"submit",size:"large"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(s.b,{className:"auth__register-link",to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))},ue=function(e){var a=e.isAuth,t=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"},password:function(e){e?/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}/i.test(e)||(n.password=a?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043b\u0435\u0433\u043a\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}};Object.keys(t).forEach(function(e){return r[e]&&r[e](t[e])})},de=Object(y.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var a={};return ue({isAuth:!1,values:e,errors:a}),a},handleSubmit:function(e,a){var t=a.setSubmitting;setTimeout(function(){alert(JSON.stringify(e,null,2)),t(!1)},1e3)},displayName:"RegisterForm"})(oe),pe=function(e){var a=e.values,t=e.touched,n=e.errors,l=e.handleChange,c=e.handleBlur,i=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(M,null,r.a.createElement(w.a,{onSubmit:i,className:"login-form"},r.a.createElement(w.a.Item,{validateStatus:J("email",t,n),help:t.email?n.email:"",hasFeedback:!0},r.a.createElement(O.a,{id:"email",prefix:r.a.createElement(j.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",size:"large",value:a.email,onChange:l,onBlur:c})),r.a.createElement(w.a.Item,null,r.a.createElement(O.a,{prefix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",size:"large"})),r.a.createElement(w.a.Item,{validateStatus:J("password",t,n),help:t.password?n.password:"",hasFeedback:!0},r.a.createElement(O.a,{prefix:r.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",value:a.password,onChange:l,onBlur:c})),r.a.createElement(w.a.Item,{validateStatus:J("password",t,n),help:t.password?n.password:"",hasFeedback:!0},r.a.createElement(O.a,{prefix:r.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large"})),r.a.createElement(w.a.Item,null,r.a.createElement(I,{type:"primary",htmlType:"submit",size:"large",onClick:i},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(w.a.Item,null,r.a.createElement(s.b,{className:"auth__register__link",to:"/login"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))))},Ee=Object(y.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",fullname:"",password:"",rePassword:""}},validate:function(e){var a={};return ue({isAuth:!1,values:e,errors:a}),a},handleSubmit:function(e,a){var t=a.setSubmitting;setTimeout(function(){alert(JSON.stringify(e,null,2)),t(!1)},1e3)},displayName:"RegisterForm"})(pe),ge=(t(395),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(N.a,{exact:!0,path:["/","/login"],component:de}),r.a.createElement(N.a,{exact:!0,path:"/register",component:Ee})))}),ve=(t(396),t(125)),fe=t.n(ve);fe.a.defaults.baseURL="http://localhost:9999";var he=fe.a,_e=function(){return he.get("/dialogs")},be={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},fetchDialogs:function(){return function(e){_e().then(function(a){var t=a.data;e(be.setDialogs(t))})}}},Ne=be,ye=Object(i.b)(function(e){return e.dialogs},Ne)(function(e){var a=e.fetchDialogs,t=e.items,l=e.userId,c=Object(n.useState)(""),s=Object(z.a)(c,2),i=s[0],m=s[1],o=Object(n.useState)(Array.from(t)),u=Object(z.a)(o,2),d=u[0],p=u[1];return Object(n.useEffect)(function(){t.length?p(t):a()},[t]),r.a.createElement(ce,{items:d,onSearch:function(e){p(t.filter(function(a){return a.user.fullname.toLowerCase().indexOf(e)>=0})),m(e)},inputValue:i,userId:l})}),we=function(){return r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement(j.a,{type:"usergroup-add"}),r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432")),r.a.createElement(S.a,{type:"link",shape:"circle",icon:"form"})),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(ye,{userId:0}))),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement("div",null),r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("p",{className:"chat__dialog-username"},"John Marchetty"),r.a.createElement("div",{className:"chat__dialog-header-status"},r.a.createElement(ie,{online:!0}))),r.a.createElement(S.a,{type:"link",shape:"circle",icon:"ellipsis"})),r.a.createElement("div",{className:"chat__dialog-messages"},r.a.createElement(G,null)),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(me,null)))))},Oe=function(e){function a(){return Object(v.a)(this,a),Object(h.a)(this,Object(_.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(N.a,{exact:!0,path:["/","/login","/register"],component:ge}),r.a.createElement(N.a,{exact:!0,path:"/im",component:we}))}}]),a}(n.Component);t(413);c.a.render(r.a.createElement(i.a,{store:g},r.a.createElement(s.a,null,r.a.createElement(Oe,null))),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.c183ae1b.chunk.js.map